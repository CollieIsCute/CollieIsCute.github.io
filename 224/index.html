<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-tw><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>224. Basic Calculator - Collie's Blog</title><meta name=author content><meta name=author-link content><meta name=description content="原始題目 給定字串包含 { '+', '-', ' ', '(', ')'} 以及數字，求出算式答案。 值得紀錄之處 處理太多條件分支 我覺得這題最麻煩的坑在於符號太多種了。如果用 if 來寫的話"><meta name=keywords content="leetcode,iterator,C++"><meta itemprop=name content="224. Basic Calculator"><meta itemprop=description content="原始題目 給定字串包含 { '+', '-', ' ', '(', ')'} 以及數字，求出算式答案。 值得紀錄之處 處理太多條件分支 我覺得這題最麻煩的坑在於符號太多種了。如果用 if 來寫的話"><meta itemprop=datePublished content="2022-11-22T16:42:51+08:00"><meta itemprop=dateModified content="2022-11-22T18:15:33+08:00"><meta itemprop=wordCount content="1031"><meta itemprop=image content="https://collieiscute.github.io/logo.png"><meta itemprop=keywords content="leetcode,iterator,C++,"><meta property="og:title" content="224. Basic Calculator"><meta property="og:description" content="原始題目 給定字串包含 { '+', '-', ' ', '(', ')'} 以及數字，求出算式答案。 值得紀錄之處 處理太多條件分支 我覺得這題最麻煩的坑在於符號太多種了。如果用 if 來寫的話"><meta property="og:type" content="article"><meta property="og:url" content="https://collieiscute.github.io/224/"><meta property="og:image" content="https://collieiscute.github.io/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-11-22T16:42:51+08:00"><meta property="article:modified_time" content="2022-11-22T18:15:33+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://collieiscute.github.io/logo.png"><meta name=twitter:title content="224. Basic Calculator"><meta name=twitter:description content="原始題目 給定字串包含 { '+', '-', ' ', '(', ')'} 以及數字，求出算式答案。 值得紀錄之處 處理太多條件分支 我覺得這題最麻煩的坑在於符號太多種了。如果用 if 來寫的話"><meta name=application-name content="FixIt"><meta name=apple-mobile-web-app-title content="FixIt"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://collieiscute.github.io/224/><link rel=prev href=https://collieiscute.github.io/2095/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"224. Basic Calculator","inLanguage":"zh-TW","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/collieiscute.github.io\/224\/"},"genre":"posts","keywords":"leetcode, iterator, C\u002b\u002b","wordcount":1031,"url":"https:\/\/collieiscute.github.io\/224\/","datePublished":"2022-11-22T16:42:51+08:00","dateModified":"2022-11-22T18:15:33+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"作者"},"description":""}</script></head><body data-header-desktop=normal data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"dark"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"dark"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=left><div class=header-title><a href=/ title="Collie's Blog"><img class="lazyload logo" src=/svg/loading.min.svg data-src="https://avatars.githubusercontent.com/u/43088530?v=4" data-srcset="https://avatars.githubusercontent.com/u/43088530?v=4, https://avatars.githubusercontent.com/u/43088530?v=4 1.5x, https://avatars.githubusercontent.com/u/43088530?v=4 2x" data-sizes=auto alt="Collie's Blog" title="Collie's Blog"><span class=header-title-pre> </span><span id=typeit-header-desktop class=typeit></span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> Posts</a></li><li class=menu-item><a class=menu-link href=/leetcode_homepage><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> Leetcode</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> Tags</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder="搜尋文章標題或內容 ..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜尋><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清除><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=切換主題><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Collie's Blog"><img class="lazyload logo" src=/svg/loading.min.svg data-src="https://avatars.githubusercontent.com/u/43088530?v=4" data-srcset="https://avatars.githubusercontent.com/u/43088530?v=4, https://avatars.githubusercontent.com/u/43088530?v=4 1.5x, https://avatars.githubusercontent.com/u/43088530?v=4 2x" data-sizes=auto alt="https://avatars.githubusercontent.com/u/43088530?v=4" title="https://avatars.githubusercontent.com/u/43088530?v=4"><span class=header-title-pre> </span><span id=typeit-header-title-mobile class=typeit></span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="搜尋文章標題或內容 ..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜尋><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清除><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> Posts</a></li><li class=menu-item><a class=menu-link href=/leetcode_homepage><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> Leetcode</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> Tags</a></li><li class="menu-item theme-switch" title=切換主題><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container data-page-style=wide><aside class=toc id=toc-auto><h2 class=toc-title>目錄&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>224. Basic Calculator</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><img class="lazyload avatar" src=/svg/loading.min.svg data-src="https://avatars.githubusercontent.com/u/43088530?v=4" data-srcset="https://avatars.githubusercontent.com/u/43088530?v=4, https://avatars.githubusercontent.com/u/43088530?v=4 1.5x, https://avatars.githubusercontent.com/u/43088530?v=4 2x" data-sizes=auto alt="https://avatars.githubusercontent.com/u/43088530?v=4" title="https://avatars.githubusercontent.com/u/43088530?v=4">&nbsp;</span></span></div><div class=post-meta-line><span title="2022-11-22 16:42:51"><i class="fa-regular fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime="2022 Nov 22">2022 Nov 22</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw" aria-hidden=true></i> 約 1031 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw" aria-hidden=true></i> 預計閱讀 3 分鐘</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>目錄</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#原始題目httpsleetcodecomproblemsbasic-calculator><a href=https://leetcode.com/problems/basic-calculator/>原始題目</a></a></li><li><a href=#值得紀錄之處>值得紀錄之處</a><ul><li><a href=#處理太多條件分支>處理太多條件分支</a></li><li><a href=#處理空格-erase--remove_if>處理空格： <code>erase</code> + <code>remove_if</code></a><ul><li><a href=#remove-系列-vs-erase><code>remove</code> 系列 v.s. <code>erase</code></a></li></ul></li><li><a href=#stack-處理變號>stack 處理變號</a></li><li><a href=#iterator-問題>iterator 問題</a></li></ul></li><li><a href=#solution>Solution</a></li></ul></nav></div></div><div class=content id=content><h2 id=原始題目httpsleetcodecomproblemsbasic-calculator><a href=https://leetcode.com/problems/basic-calculator/ target=_blank rel="external nofollow noopener noreferrer">原始題目</a></h2><p>給定字串包含 <code>{ '+', '-', ' ', '(', ')'}</code> 以及數字，求出算式答案。</p><h2 id=值得紀錄之處>值得紀錄之處</h2><h3 id=處理太多條件分支>處理太多條件分支</h3><p>我覺得這題最麻煩的坑在於符號太多種了。如果用 <code>if</code> 來寫的話，會有太多條件分支（ branch condition ），所以我一直很想把某些 branch 合在一起。比如說：</p><ol><li><code>+</code>, <code>-</code> 後面跟著 <code>(</code></li><li><code>+</code>, <code>-</code> 後面跟著數字</li><li><code>+</code>, <code>-</code> 後面是 <code></code>, 而再之後還可以混合前兩項組合出更多種變化。</li></ol><p>這樣乘起來情況非常多，也很難維護。如果可以忽略掉 <code>+</code>, <code>-</code>, 只在遇到數字和 <code>(</code> 的時候，再往回檢查符號，就可以減少需要列舉的情況數量了。</p><h3 id=處理空格-erase--remove_if>處理空格： <code>erase</code> + <code>remove_if</code></h3><p>如果可以使得字串裡面完全沒有空格，那需要處理的情況也可以再更加精簡。 C++ 裡面有一套 <code>erase</code> + <code>remove_if</code> 組合技可以用：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>s</span><span class=p>.</span><span class=n>erase</span><span class=p>(</span><span class=n>remove_if</span><span class=p>(</span><span class=n>s</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=n>s</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span> <span class=p>[](</span><span class=kt>unsigned</span> <span class=kt>char</span> <span class=n>ch</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span> <span class=n>std</span><span class=o>::</span><span class=n>isspace</span><span class=p>(</span><span class=n>ch</span><span class=p>);</span> <span class=p>}),</span> <span class=n>s</span><span class=p>.</span><span class=n>end</span><span class=p>());</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=remove-系列-vs-erase><code>remove</code> 系列 v.s. <code>erase</code></h4><p>這兩個我以前都一直搞不清楚差異，直到寫這題時認真去研究他們之間的差別並紀錄於此。</p><ul><li><code>ForwardIt remove(ForwardIt first, ForwardIt last, const T& value)</code>: 它在做的事情是移動元素，並不包含刪除元素本身。如果 [first, end) 區間內有任何元素的值 == <code>value</code> 則把後面的資料指派給目前這一格元素，最後再回傳一個 iterator 物件當作待會要 <code>erase()</code> 的起始點，時間複雜度比寫個迴圈不斷 <code>find</code> 並刪除快很多（ $O(n^2)$ v.s. $O(n)$ ），我覺得 <a href=https://en.cppreference.com/w/cpp/algorithm/remove target=_blank rel="external nofollow noopener noreferrer">cppreference 複製過來的實作</a>蠻有趣的，有興趣的話推薦讀看看。</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=k>template</span><span class=o>&lt;</span> <span class=k>class</span> <span class=nc>ForwardIt</span><span class=p>,</span> <span class=k>class</span> <span class=nc>T</span> <span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=n>ForwardIt</span> <span class=n>remove</span><span class=p>(</span><span class=n>ForwardIt</span> <span class=n>first</span><span class=p>,</span> <span class=n>ForwardIt</span> <span class=n>last</span><span class=p>,</span> <span class=k>const</span> <span class=n>T</span><span class=o>&amp;</span> <span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>first</span> <span class=o>=</span> <span class=n>std</span><span class=o>::</span><span class=n>find</span><span class=p>(</span><span class=n>first</span><span class=p>,</span> <span class=n>last</span><span class=p>,</span> <span class=n>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=p>(</span><span class=n>first</span> <span class=o>!=</span> <span class=n>last</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=k>for</span><span class=p>(</span><span class=n>ForwardIt</span> <span class=n>i</span> <span class=o>=</span> <span class=n>first</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span> <span class=o>!=</span> <span class=n>last</span><span class=p>;</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=p>(</span><span class=o>*</span><span class=n>i</span> <span class=o>==</span> <span class=n>value</span><span class=p>))</span>
</span></span><span class=line><span class=cl>				<span class=o>*</span><span class=n>first</span><span class=o>++</span> <span class=o>=</span> <span class=n>std</span><span class=o>::</span><span class=n>move</span><span class=p>(</span><span class=o>*</span><span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=n>first</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>至於 <code>erase()</code> 則是可以傳入頭尾兩個 iterator 參數，刪除該區間並且把頭尾接上。</li><li><code>remove_if()</code> 跟 <code>remove()</code> 有點像，只是第三個參數是放一個回傳值可被轉成 <code>bool</code> 的函數。它會去呼叫那個函數，並從回傳值判斷要不要 remove 掉元素內的資料。</li></ul><h3 id=stack-處理變號>stack 處理變號</h3><p>直覺上採用 stack 來判斷括號內區域要不要變號，進入括號就 push 一個新的符號，離開括號則 pop 最上面的符號，即可完成判斷。（如果有 <code>*</code>, <code>/</code> 會比較麻煩，要多處理四則運算優先度的問題，還好這題不用😅）</p><h3 id=iterator-問題>iterator 問題</h3><p>似乎不能把他理解為按照大小排列的指標，紀錄我這陣子有遇到一些坑：</p><ol><li>沒有 <code>&lt;=</code> operator, 如果用以下的寫法會有問題。要寫成 <code>!=</code> 才正統。</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=k>for</span><span class=p>(</span><span class=k>auto</span> <span class=n>it</span> <span class=o>=</span> <span class=n>obj</span><span class=p>.</span><span class=n>begin</span><span class=p>();</span> <span class=n>it</span> <span class=o>&lt;=</span> <span class=n>obj</span><span class=p>.</span><span class=n>end</span><span class=p>();</span> <span class=n>obj</span><span class=o>++</span><span class=p>){</span>
</span></span><span class=line><span class=cl>	<span class=c1>// do something
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>iterator 沒有直接加上某個常數的運算，但是指標有這種 Syntactic sugar 可以自動根據型別決定要往前多少個 bytes.</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=k>auto</span> <span class=n>it</span> <span class=o>=</span> <span class=n>obj</span><span class=p>.</span><span class=n>begin</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=c1>// auto it = it + 3; // 沒有這種運算
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>std</span><span class=o>::</span><span class=n>advance</span><span class=p>(</span><span class=n>it</span><span class=p>,</span> <span class=mi>3</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>如果之後能夠更深入了解 iterator 的底層實作，再來寫一篇紀錄我對於 iterator 的了解好了😆</p><h2 id=solution>Solution</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=c1>// after parsing, put `it` represent the last digit of num
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=nf>parse_num</span><span class=p>(</span><span class=kt>int</span><span class=o>&amp;</span> <span class=n>num_head</span><span class=p>,</span> <span class=k>const</span> <span class=n>string</span><span class=o>&amp;</span> <span class=n>s</span><span class=p>){</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>cnt</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>sign</span> <span class=o>=</span> <span class=p>(</span><span class=n>num_head</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>s</span><span class=p>[</span><span class=n>num_head</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;-&#39;</span><span class=p>)</span> <span class=o>?</span> <span class=o>-</span><span class=mi>1</span> <span class=o>:</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span><span class=p>(;</span> <span class=n>isdigit</span><span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=n>num_head</span> <span class=o>+</span> <span class=n>cnt</span><span class=p>]);</span> <span class=n>cnt</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>stoi</span><span class=p>(</span><span class=n>s</span><span class=p>.</span><span class=n>substr</span><span class=p>(</span><span class=n>num_head</span><span class=p>,</span> <span class=n>cnt</span><span class=p>));</span>
</span></span><span class=line><span class=cl>	<span class=n>num_head</span> <span class=o>+=</span> <span class=p>(</span><span class=n>cnt</span> <span class=o>-</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=n>n</span> <span class=o>*</span> <span class=n>sign</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Solution</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>calculate</span><span class=p>(</span><span class=n>string</span> <span class=n>s</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>s</span><span class=p>.</span><span class=n>erase</span><span class=p>(</span><span class=n>remove_if</span><span class=p>(</span><span class=n>s</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=n>s</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span> <span class=p>[](</span><span class=kt>unsigned</span> <span class=kt>char</span> <span class=n>ch</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span> <span class=n>std</span><span class=o>::</span><span class=n>isspace</span><span class=p>(</span><span class=n>ch</span><span class=p>);</span> <span class=p>}),</span>
</span></span><span class=line><span class=cl>				<span class=n>s</span><span class=p>.</span><span class=n>end</span><span class=p>());</span>
</span></span><span class=line><span class=cl>		<span class=n>stack</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>sign_stack</span><span class=p>{};</span>
</span></span><span class=line><span class=cl>		<span class=kt>int</span> <span class=n>ret</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>cur_sign</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=k>for</span><span class=p>(</span><span class=k>auto</span> <span class=n>it</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>it</span> <span class=o>&lt;</span> <span class=n>s</span><span class=p>.</span><span class=n>size</span><span class=p>();</span> <span class=n>it</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=k>if</span><span class=p>(</span><span class=n>isdigit</span><span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=n>it</span><span class=p>]))</span>
</span></span><span class=line><span class=cl>				<span class=n>ret</span> <span class=o>+=</span> <span class=n>parse_num</span><span class=p>(</span><span class=n>it</span><span class=p>,</span> <span class=n>s</span><span class=p>)</span> <span class=o>*</span> <span class=n>cur_sign</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=k>else</span> <span class=nf>if</span><span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=n>it</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;(&#39;</span><span class=p>){</span>
</span></span><span class=line><span class=cl>				<span class=k>if</span><span class=p>(</span><span class=n>it</span><span class=o>&gt;</span><span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>s</span><span class=p>[</span><span class=n>it</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;-&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					<span class=n>sign_stack</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>				<span class=k>else</span>
</span></span><span class=line><span class=cl>					<span class=n>sign_stack</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>				<span class=n>cur_sign</span> <span class=o>*=</span> <span class=n>sign_stack</span><span class=p>.</span><span class=n>top</span><span class=p>();</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>			<span class=k>else</span> <span class=nf>if</span><span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=n>it</span><span class=p>]</span> <span class=o>==</span> <span class=err>&#39;</span><span class=p>)</span><span class=err>&#39;</span><span class=p>){</span>
</span></span><span class=line><span class=cl>				<span class=n>cur_sign</span> <span class=o>/=</span> <span class=n>sign_stack</span><span class=p>.</span><span class=n>top</span><span class=p>();</span>
</span></span><span class=line><span class=cl>				<span class=n>sign_stack</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>ret</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="2022-11-22 18:15:33">更新於 2022 Nov 22&nbsp;</span></div></div><div class=post-info-line><div class=post-info-md><span><a href=/224/index.md title=閱讀原始文檔 class=link-to-markdown>閱讀原始文檔</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://collieiscute.github.io/224/ data-title="224. Basic Calculator" data-hashtags=leetcode,iterator,C++><i class="fa-brands fa-twitter fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://collieiscute.github.io/224/ data-hashtag=leetcode><i class="fa-brands fa-facebook-square fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 WhatsApp" data-sharer=whatsapp data-url=https://collieiscute.github.io/224/ data-title="224. Basic Calculator" data-web><i class="fa-brands fa-whatsapp fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Line" data-sharer=line data-url=https://collieiscute.github.io/224/ data-title="224. Basic Calculator"><i data-svg-src=/lib/simple-icons/icons/line.min.svg aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Evernote" data-sharer=evernote data-url=https://collieiscute.github.io/224/ data-title="224. Basic Calculator"><i class="fa-brands fa-evernote fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Trello" data-sharer=trello data-url=https://collieiscute.github.io/224/ data-title="224. Basic Calculator" data-description><i class="fa-brands fa-trello fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/leetcode/>leetcode</a>,&nbsp;<a href=/tags/iterator/>iterator</a>,&nbsp;<a href=/tags/c++/>C++</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主頁</a></span></section></div><div class=post-nav><a href=/2095/ class=prev rel=prev title="2095. Delete the Middle Node of a Linked List"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>2095. Delete the Middle Node of a Linked List</a></div></div></article></main></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到頂部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class=variant-numeric>0%</span></div></div><a href=https://github.com/CollieIsCute/CollieIsCute.github.io title="View source on GitHub" target=_blank rel="external nofollow" class="github-corner left d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><noscript><div class=noscript-warning>FixIt 主題在啟用 JavaScript 的情況下效果最佳。</div></noscript></div><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/lunr/lunr.min.js defer></script><script src=/lib/lunr/lunr.stemmer.support.min.js defer></script><script src=/lib/lunr/lunr.zh.min.js defer></script><script src=/lib/lazysizes/lazysizes.min.js async defer></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/typeit/index.umd.js defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script>window.config={code:{copyTitle:"複製到剪貼板",maxShownLines:10},comment:{enable:!1},cookieconsent:{content:{dismiss:"同意",link:"瞭解更多",message:"本網站使用 Cookies 來改善您的流覽體驗。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},data:{"typeit-header-desktop":" Collie's Blog","typeit-header-title-mobile":" Collie's Blog"},enablePWA:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",lunrLanguageCode:"zh",lunrSegmentitURL:"/lib/lunr/lunr.segmentit.js",maxResultLength:10,noResultsFound:"沒有找到結果",snippetLength:30,type:"lunr"},typeit:{cursorChar:"",cursorSpeed:1e3,data:{"typeit-header-desktop":["typeit-header-desktop"],"typeit-header-title-mobile":["typeit-header-title-mobile"]},duration:1e3,speed:40}}</script><script src=/js/theme.min.js defer></script></body></html>